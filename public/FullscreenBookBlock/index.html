<!DOCTYPE html>
<html lang="en" class="no-js">

<head>
	<meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Fullscreen Pageflip Layout with BookBlock</title>
	<meta name="description" content="Fullscreen Pageflip Layout with BookBlock" />
	<meta name="keywords" content="fullscreen pageflip, booklet, layout, bookblock, jquery plugin, flipboard layout, sidebar menu"
	/>
	<meta name="author" content="Codrops" />
	<link rel="shortcut icon" href="../favicon.ico">
	<link rel="stylesheet" type="text/css" href="css/jquery.jscrollpane.custom.css" />
	<link rel="stylesheet" type="text/css" href="css/bookblock.css" />
	<link rel="stylesheet" type="text/css" href="css/custom.css" />
	<script src="js/modernizr.custom.79639.js"></script>
</head>

<body>
	<div id="container" class="container">

		<div class="menu-panel">
			<h3>Your Memories</h3>
			<!--MENU!-->
			<ul id="menu-toc" class="menu-toc">
				<li class="menu-toc-current">
			</ul>
		</div>

		<div class="bb-custom-wrapper">
			<div id="bb-bookblock" class="bb-bookblock">
				<!--APPEND HERE-->
				<div class="bb-item bookblock" id="hardcoded">
					<div class="content">
						<div class="scroller">
							Testing
							<br>
							<img src='http://www.rd.com/wp-content/uploads/sites/2/2016/02/06-train-cat-shake-hands.jpg' width='50%' height='50%'>
						</div>
					</div>

					<nav>
						<span id="bb-nav-prev">&larr;</span>
						<span id="bb-nav-next">&rarr;</span>
					</nav>

					<span id="tblcontents" class="menu-button">Table of Contents</span>

				</div>

			</div>
			<!-- /container -->
			<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
			<script src="js/jquery.mousewheel.js"></script>
			<script src="js/jquery.jscrollpane.min.js"></script>
			<script src="js/jquerypp.custom.js"></script>
			<script src="js/jquery.bookblock.js"></script>
			<script src="js/page.js"></script>
			<script>
				$(document).ready(function () {
					var memoryPromise = new Promise(function (resolve, reject) {
						var memory;
						$.get("/api/memories", function (memories) {
							var tocInfo = {};
							for (memory of memories) {
								appendPage(memory);
								appendToc(memory);
							}
							resolve(memories)
						});
					});
					$(function () {
						memoryPromise.then(function (res) {
							Page.init();
						})
					});
					function appendToc(memory) {
						$('.menu-toc-current').append(`
		<li><a href="#${memory._id}">${memory.title}</a><br><img src='../../uploads/${memory.picture}' 
                        class="thumbnails" id=${memory.picture} 
                        data-memoryId="${memory._id}">
						</li>`);
					}
					function appendPage(memory) {

						$('.bb-bookblock').append(`
		<div class="bb-item bookblock" id="${memory._id}">
			<div class="content">
				<div class="scroller">
					${memory.title}
					<img src='../../uploads/${memory.picture}' 
                        class="thumbnails" id=${memory.picture} 
                        data-memoryId="${memory._id}">
				</div>
			</div>
		</div>`);
					}				
});
			</script>
</body>

</html>