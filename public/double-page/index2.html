<!doctype html>
<!--[if lt IE 7 ]> <html lang="en" class="ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="ie9"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en">
<!--<![endif]-->

<head>
	<meta name="viewport" content="width = 1050, user-scalable = no" />
	<script src="https://code.jquery.com/jquery-3.2.1.js" integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE=" crossorigin="anonymous"></script>
	<script type="text/javascript" src="./extras/modernizr.2.5.3.min.js"></script>
</head>

<body>

	<div class="flipbook-viewport">
		<div class="container">
			<div class="flipbook">
				<div class="page" style="background-image:url(pages/1.jpg)"></div>
			</div>
		</div>
	</div>


	<script type="text/javascript">
	$(document).ready(function(){
	$.get("/api/memories", function (memories) {
			for (memory of memories) {
				appendPage(memory);
			}
		});

		function appendPage(memory) {

			$('.flipbook').append(`
			<div class="double" id="${memory._id}">
					${memory.title}
					<img src='../../uploads/${memory.picture}' 
                        class="thumbnails" id=${memory.picture} 
                        data-memoryId="${memory._id}">
		</div>`);
		}
		function loadApp() {

			var flipbook = $('.flipbook');

			// Check if the CSS was already loaded

			if (flipbook.width() == 0 || flipbook.height() == 0) {
				setTimeout(loadApp, 10);
				return;
			}

			$('.flipbook .double').scissor();

			// Create the flipbook

			$('.flipbook').turn({
				// Elevation

				elevation: 50,

				// Enable gradients

				gradients: true,

				// Auto center this flipbook

				autoCenter: true

			});
		}

		// Load the HTML4 version if there's not CSS transform

		yepnope({
			test: Modernizr.csstransforms,
			yep: ['../../lib/turn.min.js'],
			nope: ['../../lib/turn.html4.min.js'],
			both: ['../../lib/scissor.min.js', 'css/double-page.css'],
			complete: loadApp
		});
	});
		// $('.flipbook').append(`<div class="double"><h1>Here is a Title</h1>Here is some information</div>`)

		

	</script>

</body>

</html>